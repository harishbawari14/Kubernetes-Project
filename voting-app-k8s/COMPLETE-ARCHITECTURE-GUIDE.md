# Complete Kubernetes Voting App Architecture Guide

## ğŸ—ï¸ **Final Architecture Overview**

This is a production-ready microservices voting application deployed on Kubernetes with high availability, security, and proper configuration management.

### **Complete System Architecture**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    KUBERNETES CLUSTER                                                       â”‚
â”‚                                                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                   VOTE-APP NAMESPACE                                                â”‚   â”‚
â”‚  â”‚                                                                                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚                              SECRETS & CONFIGMAPS                                          â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                                                                                             â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚   secret.yaml   â”‚    â”‚  config.yaml    â”‚    â”‚                 â”‚                        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚                        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ db-credentials: â”‚    â”‚ app-config:     â”‚    â”‚                 â”‚                        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ - username      â”‚    â”‚ - POSTGRES_HOST â”‚    â”‚                 â”‚                        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ - password      â”‚    â”‚ - POSTGRES_DB   â”‚    â”‚                 â”‚                        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚                 â”‚    â”‚ - REDIS_HOST    â”‚    â”‚                 â”‚                        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ redis-credentialsâ”‚    â”‚ - REDIS_PORT    â”‚    â”‚                 â”‚                        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ - password      â”‚    â”‚ - REDIS_URL     â”‚    â”‚                 â”‚                        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                          â”‚                                                         â”‚   â”‚
â”‚  â”‚                                          â–¼                                                         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚                                   SERVICES                                                  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                                                                                             â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ voting-service  â”‚  â”‚ result-service  â”‚  â”‚  redis (alias)  â”‚  â”‚   db (alias)    â”‚      â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚   (NodePort)    â”‚  â”‚   (NodePort)    â”‚  â”‚   (ClusterIP)   â”‚  â”‚   (ClusterIP)   â”‚      â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚   Port: 30080   â”‚  â”‚   Port: 30081   â”‚  â”‚   Port: 6379    â”‚  â”‚   Port: 5432    â”‚      â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚   â”‚
â”‚  â”‚  â”‚           â”‚                       â”‚                       â”‚                       â”‚       â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚              â”‚                       â”‚                       â”‚                       â”‚           â”‚   â”‚
â”‚  â”‚              â–¼                       â–¼                       â–¼                       â–¼           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚                                 DEPLOYMENTS                                                â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                                                                                             â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚                        VOTING APP DEPLOYMENT (2 Replicas)                          â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚                                                                                     â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ voting-app-pod-1â”‚              â”‚ voting-app-pod-2â”‚                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                 â”‚              â”‚                 â”‚                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ Image: vote:v1  â”‚              â”‚ Image: vote:v1  â”‚                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ Port: 80        â”‚              â”‚ Port: 80        â”‚                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                 â”‚              â”‚                 â”‚                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ ENV (from ConfigMap & Secret):  â”‚ ENV (from ConfigMap & Secret):               â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ REDIS_HOST â—„â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€ configMap      â”‚                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ REDIS_PORT â—„â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€ configMap      â”‚                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                                          â”‚                                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                                          â–¼                                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚                         REDIS DEPLOYMENT (2 Replicas)                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚                                                                                     â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   redis-pod-1   â”‚              â”‚   redis-pod-2   â”‚                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                 â”‚              â”‚                 â”‚                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ Image: redis    â”‚              â”‚ Image: redis    â”‚                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ Port: 6379      â”‚              â”‚ Port: 6379      â”‚                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                                          â–²                                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                                          â”‚                                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚                        WORKER DEPLOYMENT (1 Replica)                               â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚                                                                                     â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                               â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  worker-app-pod â”‚                                                               â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                 â”‚                                                               â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ Image: worker:v1â”‚                                                               â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                 â”‚                                                               â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ ENV (from ConfigMap & Secret):                                                  â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ REDIS_HOST â—„â”€â”€â”€â”€â”€â”€â”€ configMap                                                   â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ POSTGRES_HOST â—„â”€â”€â”€â”€ configMap                                                   â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ POSTGRES_USER â—„â”€â”€â”€â”€ secret                                                      â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ POSTGRES_PASSWORD â—„â”€ secret                                                     â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                               â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                                          â”‚                                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                                          â–¼                                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚                      POSTGRES DEPLOYMENT (1 Replica)                               â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚                                                                                     â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                               â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  postgres-pod   â”‚                                                               â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                 â”‚                                                               â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ Image: postgres â”‚                                                               â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ Port: 5432      â”‚                                                               â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                 â”‚                                                               â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ ENV (from ConfigMap & Secret):                                                  â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ POSTGRES_USER â—„â”€â”€â”€â”€ secret                                                      â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ POSTGRES_PASSWORD â—„â”€ secret                                                     â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ POSTGRES_DB â—„â”€â”€â”€â”€â”€â”€ configMap                                                   â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                                                                 â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ Contains: votes table                                                           â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                               â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                                          â–²                                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                                          â”‚                                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚                       RESULT APP DEPLOYMENT (2 Replicas)                           â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚                                                                                     â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ result-app-pod-1â”‚              â”‚ result-app-pod-2â”‚                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                 â”‚              â”‚                 â”‚                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ Image: result:v1â”‚              â”‚ Image: result:v1â”‚                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ Port: 80        â”‚              â”‚ Port: 80        â”‚                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                 â”‚              â”‚                 â”‚                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ ENV (from ConfigMap & Secret):  â”‚ ENV (from ConfigMap & Secret):               â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ POSTGRES_HOST â—„â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€ configMap      â”‚                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ POSTGRES_USER â—„â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€ secret         â”‚                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ POSTGRES_PASSWORD â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€ secret         â”‚                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

External Access:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser   â”‚    â”‚   Browser   â”‚
â”‚             â”‚    â”‚             â”‚
â”‚ :30080      â”‚    â”‚ :30081      â”‚
â”‚ (Voting)    â”‚    â”‚ (Results)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ **Data Flow Architecture**

### **Complete Vote Processing Flow**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    User     â”‚â”€â”€â”€â–¶â”‚ Voting App  â”‚â”€â”€â”€â–¶â”‚   Redis     â”‚â”€â”€â”€â–¶â”‚   Worker    â”‚â”€â”€â”€â–¶â”‚ PostgreSQL  â”‚
â”‚  (Browser)  â”‚    â”‚ (2 replicas)â”‚    â”‚(2 replicas) â”‚    â”‚ (1 replica) â”‚    â”‚ (1 replica) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                                                                            â”‚
      â”‚                                                                            â–¼
      â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Result App  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ PostgreSQL  â”‚
                   â”‚ (2 replicas)â”‚                                        â”‚   Database  â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚    User     â”‚
                   â”‚  (Browser)  â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ **Complete File Structure**

```
voting-app-k8s/
â”œâ”€â”€ ğŸ“„ secret.yaml                    # Sensitive data (passwords, usernames)
â”œâ”€â”€ ğŸ“„ config.yaml                    # Application configuration
â”œâ”€â”€ ğŸ“„ voting-app-pod.yaml           # Voting app deployment (2 replicas)
â”œâ”€â”€ ğŸ“„ redis-pod.yaml                # Redis deployment (2 replicas)
â”œâ”€â”€ ğŸ“„ postgres-pod.yaml             # PostgreSQL deployment (1 replica)
â”œâ”€â”€ ğŸ“„ result-app-pod.yaml           # Result app deployment (2 replicas)
â”œâ”€â”€ ğŸ“„ worker-app-pod.yaml           # Worker deployment (1 replica)
â”œâ”€â”€ ğŸ“‚ Service/
â”‚   â”œâ”€â”€ ğŸ“„ voting-app-service.yaml   # NodePort service (external access)
â”‚   â”œâ”€â”€ ğŸ“„ result-app-service.yaml   # NodePort service (external access)
â”‚   â”œâ”€â”€ ğŸ“„ redis-alias-service.yaml  # ClusterIP service (internal)
â”‚   â””â”€â”€ ğŸ“„ postgres-alias-service.yaml # ClusterIP service (internal)
â”œâ”€â”€ ğŸ“„ README.md                     # Original troubleshooting guide
â””â”€â”€ ğŸ“„ COMPLETE-ARCHITECTURE-GUIDE.md # This comprehensive guide
```

## ğŸ” **Security & Configuration Management**

### **Secret Management Flow**
```yaml
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              SECRET MANAGEMENT                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚   secret.yaml   â”‚â”€â”€â”€â–¶â”‚  Kubernetes     â”‚â”€â”€â”€â–¶â”‚   Pod Env Vars  â”‚                â”‚
â”‚  â”‚                 â”‚    â”‚     etcd        â”‚    â”‚                 â”‚                â”‚
â”‚  â”‚ db-credentials: â”‚    â”‚                 â”‚    â”‚ POSTGRES_USER   â”‚                â”‚
â”‚  â”‚ - username      â”‚    â”‚ (Encrypted      â”‚    â”‚ POSTGRES_PASSWORDâ”‚               â”‚
â”‚  â”‚ - password      â”‚    â”‚  Storage)       â”‚    â”‚                 â”‚                â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚                â”‚
â”‚  â”‚ redis-credentialsâ”‚    â”‚                 â”‚    â”‚                 â”‚                â”‚
â”‚  â”‚ - password      â”‚    â”‚                 â”‚    â”‚                 â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚  config.yaml    â”‚â”€â”€â”€â–¶â”‚  Kubernetes     â”‚â”€â”€â”€â–¶â”‚   Pod Env Vars  â”‚                â”‚
â”‚  â”‚                 â”‚    â”‚   ConfigMap     â”‚    â”‚                 â”‚                â”‚
â”‚  â”‚ app-config:     â”‚    â”‚                 â”‚    â”‚ POSTGRES_HOST   â”‚                â”‚
â”‚  â”‚ - POSTGRES_HOST â”‚    â”‚ (Plain Text     â”‚    â”‚ POSTGRES_DB     â”‚                â”‚
â”‚  â”‚ - POSTGRES_DB   â”‚    â”‚  Storage)       â”‚    â”‚ REDIS_HOST      â”‚                â”‚
â”‚  â”‚ - REDIS_HOST    â”‚    â”‚                 â”‚    â”‚ REDIS_PORT      â”‚                â”‚
â”‚  â”‚ - REDIS_PORT    â”‚    â”‚                 â”‚    â”‚                 â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Environment Variable Resolution**
```yaml
# How pods get their configuration:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ENVIRONMENT VARIABLE SOURCES                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                     â”‚
â”‚ Pod Container Environment Variables:                                                â”‚
â”‚                                                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ POSTGRES_USER:                                                                  â”‚ â”‚
â”‚ â”‚   valueFrom:                                                                    â”‚ â”‚
â”‚ â”‚     secretKeyRef:                                                               â”‚ â”‚
â”‚ â”‚       name: db-credentials  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Secret: db-credentials                  â”‚ â”‚
â”‚ â”‚       key: username         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Key: username (base64: cG9zdGdyZXM=)   â”‚ â”‚
â”‚ â”‚                                                                                 â”‚ â”‚
â”‚ â”‚ POSTGRES_HOST:                                                                  â”‚ â”‚
â”‚ â”‚   valueFrom:                                                                    â”‚ â”‚
â”‚ â”‚     configMapKeyRef:                                                            â”‚ â”‚
â”‚ â”‚       name: app-config      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ ConfigMap: app-config                  â”‚ â”‚
â”‚ â”‚       key: POSTGRES_HOST    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Key: POSTGRES_HOST (value: "db")       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                     â”‚
â”‚ Result: Pod gets environment variables with actual values:                          â”‚
â”‚ - POSTGRES_USER="postgres"                                                          â”‚
â”‚ - POSTGRES_HOST="db"                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”— **Service Discovery & Networking**

### **Complete Service Wiring**
```yaml
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            SERVICE DISCOVERY FLOW                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                     â”‚
â”‚ 1. Pod Environment Variable: REDIS_HOST="redis"                                     â”‚
â”‚    â†“                                                                                â”‚
â”‚ 2. Kubernetes DNS Lookup: redis.vote-app.svc.cluster.local                         â”‚
â”‚    â†“                                                                                â”‚
â”‚ 3. Service Discovery: redis service (ClusterIP: 10.100.184.52)                     â”‚
â”‚    â†“                                                                                â”‚
â”‚ 4. Service Selector: app=demo-voting-app, tier=backend, component=redis            â”‚
â”‚    â†“                                                                                â”‚
â”‚ 5. Pod Selection: redis-deployment-xxxxx-xxxxx (multiple pods)                     â”‚
â”‚    â†“                                                                                â”‚
â”‚ 6. Load Balancing: Kubernetes distributes traffic across healthy pods              â”‚
â”‚    â†“                                                                                â”‚
â”‚ 7. Connection: Pod connects to Redis on port 6379                                   â”‚
â”‚                                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Service-to-Deployment Mapping**
```yaml
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      SERVICE        â”‚     SELECTOR        â”‚     DEPLOYMENT      â”‚      REPLICAS       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ voting-service      â”‚ app=demo-voting-app â”‚ voting-app-         â”‚ 2 replicas          â”‚
â”‚ (NodePort: 30080)   â”‚ tier=frontend       â”‚ deployment          â”‚ (Load Balanced)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ result-service      â”‚ app=demo-voting-app â”‚ result-app-         â”‚ 2 replicas          â”‚
â”‚ (NodePort: 30081)   â”‚ tier=frontend       â”‚ deployment          â”‚ (Load Balanced)     â”‚
â”‚                     â”‚ component=result    â”‚                     â”‚                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ redis               â”‚ app=demo-voting-app â”‚ redis-deployment    â”‚ 2 replicas          â”‚
â”‚ (ClusterIP)         â”‚ tier=backend        â”‚                     â”‚ (Load Balanced)     â”‚
â”‚                     â”‚ component=redis     â”‚                     â”‚                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ db                  â”‚ app=demo-voting-app â”‚ postgres-           â”‚ 1 replica           â”‚
â”‚ (ClusterIP)         â”‚ tier=backend        â”‚ deployment          â”‚ (Single Instance)   â”‚
â”‚                     â”‚ component=postgres  â”‚                     â”‚                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ (none - internal)   â”‚ app=demo-voting-app â”‚ worker-app-         â”‚ 1 replica           â”‚
â”‚                     â”‚ tier=worker         â”‚ deployment          â”‚ (Background Job)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ **High Availability & Scalability**

### **Replica Distribution Strategy**
```yaml
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           REPLICA STRATEGY                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Voting App      â”‚  â”‚ Result App      â”‚  â”‚ Redis Cache     â”‚  â”‚ PostgreSQL DB   â”‚ â”‚
â”‚ â”‚ 2 REPLICAS      â”‚  â”‚ 2 REPLICAS      â”‚  â”‚ 2 REPLICAS      â”‚  â”‚ 1 REPLICA       â”‚ â”‚
â”‚ â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚ â”‚
â”‚ â”‚ Why 2?          â”‚  â”‚ Why 2?          â”‚  â”‚ Why 2?          â”‚  â”‚ Why 1?          â”‚ â”‚
â”‚ â”‚ â€¢ High traffic  â”‚  â”‚ â€¢ High traffic  â”‚  â”‚ â€¢ Redundancy    â”‚  â”‚ â€¢ Data          â”‚ â”‚
â”‚ â”‚ â€¢ Load balance  â”‚  â”‚ â€¢ Load balance  â”‚  â”‚ â€¢ Performance   â”‚  â”‚   consistency   â”‚ â”‚
â”‚ â”‚ â€¢ Zero downtime â”‚  â”‚ â€¢ Zero downtime â”‚  â”‚ â€¢ Failover      â”‚  â”‚ â€¢ Single source â”‚ â”‚
â”‚ â”‚ â€¢ User facing   â”‚  â”‚ â€¢ User facing   â”‚  â”‚ â€¢ Cache hits    â”‚  â”‚   of truth      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                 â”‚
â”‚ â”‚ Worker Process  â”‚                                                                 â”‚
â”‚ â”‚ 1 REPLICA       â”‚                                                                 â”‚
â”‚ â”‚                 â”‚                                                                 â”‚
â”‚ â”‚ Why 1?          â”‚                                                                 â”‚
â”‚ â”‚ â€¢ Background    â”‚                                                                 â”‚
â”‚ â”‚ â€¢ Sequential    â”‚                                                                 â”‚
â”‚ â”‚ â€¢ No user       â”‚                                                                 â”‚
â”‚ â”‚   interaction   â”‚                                                                 â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Load Balancing Flow**
```yaml
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              LOAD BALANCING                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                     â”‚
â”‚ External User Request:                                                              â”‚
â”‚                                                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚   Browser   â”‚â”€â”€â”€â–¶â”‚ NodePort    â”‚â”€â”€â”€â–¶â”‚        Kubernetes Service              â”‚   â”‚
â”‚ â”‚             â”‚    â”‚ 30080       â”‚    â”‚        (voting-service)                â”‚   â”‚
â”‚ â”‚ GET /       â”‚    â”‚             â”‚    â”‚                                         â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚                                       â”‚ â”‚     Load Balancer Algorithm        â”‚ â”‚   â”‚
â”‚                                       â”‚ â”‚     (Round Robin / Random)         â”‚ â”‚   â”‚
â”‚                                       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚                           â”‚
â”‚                                                         â–¼                           â”‚
â”‚                                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                                       â”‚         Pod Selection               â”‚   â”‚
â”‚                                       â”‚                                         â”‚   â”‚
â”‚                                       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚                                       â”‚ â”‚ Pod 1       â”‚  â”‚ Pod 2       â”‚     â”‚   â”‚
â”‚                                       â”‚ â”‚ Ready: âœ…   â”‚  â”‚ Ready: âœ…   â”‚     â”‚   â”‚
â”‚                                       â”‚ â”‚ Health: âœ…  â”‚  â”‚ Health: âœ…  â”‚     â”‚   â”‚
â”‚                                       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚                           â”‚
â”‚                                                         â–¼                           â”‚
â”‚                                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                                       â”‚      Selected Pod Handles Request      â”‚   â”‚
â”‚                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ **Deployment Commands & Management**

### **Complete Deployment Sequence**
```bash
# 1. Create namespace (if not exists)
kubectl create namespace vote-app

# 2. Apply secrets and config (MUST BE FIRST)
kubectl apply -f secret.yaml -n vote-app
kubectl apply -f config.yaml -n vote-app

# 3. Apply services (networking layer)
kubectl apply -f Service/ -n vote-app

# 4. Apply deployments (application layer)
kubectl apply -f postgres-pod.yaml -n vote-app
kubectl apply -f redis-pod.yaml -n vote-app
kubectl apply -f voting-app-pod.yaml -n vote-app
kubectl apply -f result-app-pod.yaml -n vote-app
kubectl apply -f worker-app-pod.yaml -n vote-app

# 5. Verify deployment
kubectl get all -n vote-app
```

### **Scaling Commands**
```bash
# Scale voting app for high traffic
kubectl scale deployment voting-app-deployment --replicas=5 -n vote-app

# Scale result app for high traffic
kubectl scale deployment result-app-deployment --replicas=3 -n vote-app

# Scale Redis for better performance
kubectl scale deployment redis-deployment --replicas=3 -n vote-app

# Scale worker for faster processing
kubectl scale deployment worker-app-deployment --replicas=2 -n vote-app

# Check scaling status
kubectl get deployments -n vote-app
```

### **Monitoring & Troubleshooting**
```bash
# Check overall health
kubectl get pods -n vote-app -o wide

# Check deployments status
kubectl get deployments -n vote-app

# Check services and endpoints
kubectl get services -n vote-app
kubectl get endpoints -n vote-app

# Check secrets and configmaps
kubectl get secrets -n vote-app
kubectl get configmaps -n vote-app

# View logs for specific components
kubectl logs -l app=demo-voting-app,tier=frontend -n vote-app
kubectl logs -l app=demo-voting-app,tier=backend -n vote-app
kubectl logs -l app=demo-voting-app,tier=worker -n vote-app

# Check resource usage
kubectl top pods -n vote-app
kubectl top nodes

# Describe problematic resources
kubectl describe deployment <deployment-name> -n vote-app
kubectl describe pod <pod-name> -n vote-app
```

## ğŸ” **Configuration Details**

### **Secret Configuration (secret.yaml)**
```yaml
apiVersion: v1
kind: Secret
metadata:
  name: db-credentials
type: Opaque
data:
  # Base64 encoded values for security
  username: cG9zdGdyZXM=  # "postgres" encoded
  password: cG9zdGdyZXM=  # "postgres" encoded

# Usage in deployments:
env:
- name: POSTGRES_USER
  valueFrom:
    secretKeyRef:
      name: db-credentials
      key: username
```

### **ConfigMap Configuration (config.yaml)**
```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  # Plain text configuration values
  POSTGRES_HOST: "db"
  POSTGRES_DB: "postgres"
  REDIS_HOST: "redis"
  REDIS_PORT: "6379"

# Usage in deployments:
env:
- name: POSTGRES_HOST
  valueFrom:
    configMapKeyRef:
      name: app-config
      key: POSTGRES_HOST
```

### **Deployment Configuration Pattern**
```yaml
# Standard deployment structure used across all components:
apiVersion: apps/v1
kind: Deployment
metadata:
  name: <component>-deployment
  labels:
    app: demo-voting-app
    tier: <frontend|backend|worker>
spec:
  replicas: <1|2>
  selector:
    matchLabels:
      app: demo-voting-app
      tier: <frontend|backend|worker>
      component: <voting|result|redis|postgres>
  template:
    metadata:
      labels:
        app: demo-voting-app
        tier: <frontend|backend|worker>
        name: <component>-pod  # For backward compatibility
        component: <voting|result|redis|postgres>
    spec:
      containers:
      - name: <component>
        image: <image-name>
        env:
        # Environment variables from secrets and configmaps
        ports:
        - containerPort: <port>
```

## ğŸŒ **Access & Testing**

### **Application URLs**
```bash
# Get service URLs (minikube)
minikube service voting-service -n vote-app --url
minikube service result-service -n vote-app --url

# Alternative: Port forwarding
kubectl port-forward service/voting-service 8080:80 -n vote-app
kubectl port-forward service/result-service 8081:80 -n vote-app

# Access URLs:
# Voting: http://localhost:8080 or http://<minikube-ip>:30080
# Results: http://localhost:8081 or http://<minikube-ip>:30081
```

### **Testing High Availability**
```bash
# Test load balancing by checking which pod handles requests
kubectl logs -l app=demo-voting-app,tier=frontend -n vote-app --follow

# Simulate pod failure
kubectl delete pod <voting-app-pod-name> -n vote-app
# Kubernetes automatically creates a new pod

# Test during pod restart
while true; do curl -s http://<voting-url> | grep -o "Cats\|Dogs"; sleep 1; done
```

## ğŸ“Š **Performance & Monitoring**

### **Resource Requirements**
```yaml
# Recommended resource limits for production:

voting-app-deployment:
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"

redis-deployment:
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "200m"

postgres-deployment:
  resources:
    requests:
      memory: "512Mi"
      cpu: "200m"
    limits:
      memory: "1Gi"
      cpu: "500m"
```

### **Health Checks**
```yaml
# Add to deployment containers for production:
livenessProbe:
  httpGet:
    path: /
    port: 80
  initialDelaySeconds: 30
  periodSeconds: 10

readinessProbe:
  httpGet:
    path: /
    port: 80
  initialDelaySeconds: 5
  periodSeconds: 5
```

## ğŸ¯ **Production Readiness Checklist**

### âœ… **Completed Features**
- [x] **High Availability**: Multiple replicas for critical components
- [x] **Security**: Secrets for sensitive data, ConfigMaps for configuration
- [x] **Service Discovery**: Proper DNS-based service communication
- [x] **Load Balancing**: Kubernetes native load balancing
- [x] **Scalability**: Easy horizontal scaling with kubectl scale
- [x] **Monitoring**: Comprehensive logging and status checking
- [x] **Fault Tolerance**: Automatic pod restart and replacement

### ğŸ”„ **Recommended Enhancements**
- [ ] **Persistent Volumes**: For PostgreSQL data persistence
- [ ] **Ingress Controller**: For better external access management
- [ ] **Resource Limits**: CPU and memory constraints
- [ ] **Health Checks**: Liveness and readiness probes
- [ ] **Network Policies**: Micro-segmentation for security
- [ ] **Horizontal Pod Autoscaler**: Automatic scaling based on metrics
- [ ] **Monitoring Stack**: Prometheus, Grafana for observability

## ğŸ† **Architecture Benefits**

### **Scalability**
- **Horizontal scaling**: Add more replicas easily
- **Component isolation**: Scale each service independently
- **Load distribution**: Traffic spreads across multiple pods

### **Reliability**
- **High availability**: Multiple replicas prevent single points of failure
- **Self-healing**: Kubernetes restarts failed pods automatically
- **Rolling updates**: Zero-downtime deployments

### **Security**
- **Secret management**: Encrypted storage of sensitive data
- **Configuration separation**: Environment-specific configs
- **Network isolation**: Services communicate through defined interfaces

### **Maintainability**
- **Clear separation**: Each component has distinct responsibilities
- **Standardized deployment**: Consistent patterns across all services
- **Easy troubleshooting**: Comprehensive logging and monitoring

This architecture represents a production-ready, scalable, and secure microservices application deployed on Kubernetes with industry best practices! ğŸš€